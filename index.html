<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>SL Fastest Path</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --border: #ddd;
      --muted: #666;
      --bg: #fff;
      --accent: #0b7;
    }
    * { box-sizing: border-box; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 20px; background: var(--bg); }
    h1, h2 { margin: 0 0 10px; }

    .row { display: grid; grid-template-columns: 1fr auto 1fr auto auto; gap: 12px; align-items: end; margin-bottom: 10px; }
    label { display: block; font-size: 12px; color: var(--muted); margin: 0 0 4px; }
    input[type="text"], input[type="datetime-local"] {
      width: 100%; padding: 10px 12px; border: 1px solid var(--border); border-radius: 8px;
    }
    button {
      padding: 10px 14px; border: 1px solid var(--border); border-radius: 8px; background: #f7f7f7; cursor: pointer;
    }
    button.primary {
      background: #0b7; color: #fff; border-color: #0a6; font-weight: 600;
    }
    button:disabled { opacity: .6; cursor: not-allowed; }

    .suggest {
      margin: 6px 0 0; padding: 0; list-style: none; border: 1px solid var(--border); border-radius: 8px; max-height: 240px; overflow: auto;
    }
    .suggest li { padding: 8px 10px; cursor: pointer; border-bottom: 1px solid var(--border); background: #fff; }
    .suggest li:last-child { border-bottom: 0; }
    .suggest li:hover { background: #f3f9f7; }
    .suggest .hint { font-size: 12px; color: var(--muted); padding: 8px 10px; background: #fafafa; }

    #status { min-height: 20px; color: var(--muted); margin: 8px 0 12px; }

    #map { height: 380px; border: 1px solid var(--border); border-radius: 10px; }
    #legs { margin-top: 12px; }
    .leg { padding: 10px 12px; border: 1px solid var(--border); border-radius: 10px; margin-bottom: 8px; background: #fff; }
    .leg h3 { margin: 0 0 6px; font-size: 14px; }
    .leg p { margin: 0; font-size: 13px; color: #333; }

    /* --- Boot overlay + spinner --- */
    #bootOverlay {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 10px;
      background: rgba(255,255,255,0.96);
      z-index: 1000;
      transition: opacity .3s ease;
    }
    #bootOverlay.hide {
      opacity: 0;
      pointer-events: none;
    }
    #bootOverlay p {
      margin: 0;
      color: #333;
      font-weight: 600;
    }
    .loader {
      width: 52px;
      height: 52px;
      border: 4px solid #ddd;
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    @media (max-width: 820px) {
      .row { grid-template-columns: 1fr; gap: 8px; }
      button { width: 100%; }
    }
  </style>

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
    crossorigin=""
  />
</head>
<body>
  <!-- Boot overlay -->
  <div id="bootOverlay" aria-live="polite">
    <div class="loader" aria-hidden="true"></div>
    <p id="bootMsg">Waking the server…</p>
  </div>

  <h1>SL</h1>

  <div class="row">
    <div>
      <label for="fromQuery">From</label>
      <input id="fromQuery" type="text" placeholder="Search stop…" autocomplete="off" />
      <ul id="fromList" class="suggest" hidden></ul>
    </div>

    <div>
      <button id="swapBtn" title="Swap from/to">Swap</button>
    </div>

    <div>
      <label for="toQuery">To</label>
      <input id="toQuery" type="text" placeholder="Search stop…" autocomplete="off" />
      <ul id="toList" class="suggest" hidden></ul>
    </div>

    <div>
      <label for="depart">Depart</label>
      <input id="depart" type="datetime-local" />
    </div>

    <div>
      <button id="goBtn" class="primary">Find route</button>
    </div>
  </div>

  <div id="status" aria-live="polite"></div>
  <div id="map"></div>
  <div id="legs"></div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
    crossorigin=""
  ></script>

  <!-- App -->
  <script type="module" src="./main.js"></script>
</body>
</html>
